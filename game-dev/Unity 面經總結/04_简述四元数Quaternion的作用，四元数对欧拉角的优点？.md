# 四元数（Quaternion）

是一种数学工具，用于表示旋转的方向和角度。它在游戏开发中广泛应用于旋转、插值和动画等方面。

四元数相对于欧拉角有以下几个优点：
1. 无死锁问题：欧拉角存在万向锁问题，即在某些情况下无法表示特定的旋转。而四元数没有这个问题，可以表示任意旋转。
2. 插值效果更好：在进行旋转插值时，使用四元数可以获得更平滑和连续的动画效果，而欧拉角则可能出现不连续或者奇怪的旋转路径。
3. 更少的存储空间( ?
4. 更快的计算速度( ?

數學

1. 四元数的定义： $q = w + xi + yj + zk$
2. 四元数的共轭： $q^* = w - xi - yj - zk$
3. 四元数的模长： $|q| = \sqrt{w^2 + x^2 + y^2 + z^2}$
4. 四元数的单位化： $q= \frac{q}{|q|} {\text{(unit)}} $
5. 四元数的加法： $q_1 + q_2 = (w_1 + w_2) + (x_1 + x_2)i + (y_1 + y_2)j + (z_1 + z_2)k$
6. 四元数的乘法： $q_1 \cdot q_2 = (w_1w_2 - x_1x_2 - y_1y_2 - z_1z_2) + (w_1x_2 + x_1w_2 + y_1z_2 - z_1y_2)i + (w_1y_2 - x_1z_2 + y_1w_2 + z_1x_2)j + (w_1z_2 + x_1y_2 - y_1x_2 + z_1w_2)k$
7. 四元数的逆： $q^{-1} = \frac{q^*}{|q|^2}$
8. 四元数的旋转： $v' = qvq^{-1}$，其中$v$是一个纯虚四元数，表示一个向量。